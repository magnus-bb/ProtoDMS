{"dashboards":[{"id":"c7410a92-3aca-4818-bb80-9b11e20705ed","name":"custom panel","icon":"dashboard","note":null,"color":"#18222F"},{"id":"d6a95587-ffbb-4afb-8de6-53bc51a6ebb2","name":"dashboard from editor user","icon":"dashboard","note":null,"color":null}],"panels":[{"id":"9116d744-55af-411f-849c-92dadcbfd133","dashboard":"c7410a92-3aca-4818-bb80-9b11e20705ed","name":"Number of Posts with titles","icon":"post_add","color":null,"show_header":true,"note":null,"type":"metric","position_x":21,"position_y":14,"width":20,"height":6,"options":{"collection":"posts","field":"title","function":"count"}},{"id":"d1a088f3-202f-4e7d-bd97-7e19a219b106","dashboard":"c7410a92-3aca-4818-bb80-9b11e20705ed","name":null,"icon":null,"color":null,"show_header":false,"note":null,"type":"label","position_x":15,"position_y":2,"width":27,"height":11,"options":{"text":"data here"}},{"id":"ead80aa2-f2d7-41ea-813c-c2a4cb247694","dashboard":"d6a95587-ffbb-4afb-8de6-53bc51a6ebb2","name":null,"icon":null,"color":null,"show_header":false,"note":null,"type":"label","position_x":9,"position_y":6,"width":32,"height":13,"options":{"text":"editor user panel"}}],"flows":[{"id":"b15c7d8d-c2fa-40e2-903b-4a6ad60a450d","name":"Notify subscribers","icon":"circle_notifications","color":"#3BCE8E","description":"When a post changes, send a notification to all of the post's subscribers","status":"active","trigger":"event","accountability":"all","options":{"type":"action","scope":["items.create","items.update"],"collections":["posts"]},"operation":"b696c141-8239-48e5-99ea-6d3d6c8e6f10"}],"operations":[{"id":"138c4932-ed18-49f4-953b-bd0bfeaae630","name":"Get action","key":"action","type":"exec","position_x":73,"position_y":1,"options":{"code":"module.exports = async function({ $trigger }) {\n    const event = $trigger.event.split('.')\n    \n\treturn event[event.length - 1]\n}"},"resolve":"d366388d-a770-41dc-a980-0eb704979bb8","reject":null,"flow":"b15c7d8d-c2fa-40e2-903b-4a6ad60a450d"},{"id":"2f183787-14f3-49e3-80fe-862b505c2123","name":"Get accountable user","key":"accountable_user","type":"item-read","position_x":82,"position_y":17,"options":{"permissions":"$full","collection":"posts_directus_users","key":"{{ $accountability.user }}"},"resolve":null,"reject":null,"flow":"b15c7d8d-c2fa-40e2-903b-4a6ad60a450d"},{"id":"332e57b8-0089-484b-8057-3201e73adc51","name":"Read affected posts","key":"read_post","type":"item-read","position_x":30,"position_y":18,"options":{"permissions":"$full","collection":"posts","key":"{{ $last }}"},"resolve":"65751f6d-012f-48cb-9a80-a72f3b70091f","reject":null,"flow":"b15c7d8d-c2fa-40e2-903b-4a6ad60a450d"},{"id":"4fe8f93a-3ee4-4a70-98e6-cc64a60bca5f","name":"Get subscriber ids","key":"subscriber_ids","type":"exec","position_x":55,"position_y":1,"options":{"code":"module.exports = async function({ $last }) {\n    if (Array.isArray($last)) {\n        return $last.map(d => d.directus_users_id)\n    }\n    \n    return [ $last.directus_users_id ]\n}"},"resolve":"138c4932-ed18-49f4-953b-bd0bfeaae630","reject":null,"flow":"b15c7d8d-c2fa-40e2-903b-4a6ad60a450d"},{"id":"65751f6d-012f-48cb-9a80-a72f3b70091f","name":"Read subscribers","key":"read_subscribers","type":"item-read","position_x":37,"position_y":1,"options":{"collection":"posts_directus_users","permissions":"$full","query":null,"key":"{{ $last.subscribers }}"},"resolve":"4fe8f93a-3ee4-4a70-98e6-cc64a60bca5f","reject":null,"flow":"b15c7d8d-c2fa-40e2-903b-4a6ad60a450d"},{"id":"b696c141-8239-48e5-99ea-6d3d6c8e6f10","name":"Get affected posts","key":"get_affected_posts","type":"exec","position_x":9,"position_y":18,"options":{"code":"module.exports = async function({ $trigger }) {\n    // If an update happens, the updated posts are in the $trigger.keys array\n    // If a create event happens, the created post is in the $trigger.key int\n    // Either way, we return an array of keys for the next step\n    return $trigger.keys || [ $trigger.key ]\n}"},"resolve":"332e57b8-0089-484b-8057-3201e73adc51","reject":null,"flow":"b15c7d8d-c2fa-40e2-903b-4a6ad60a450d"},{"id":"d366388d-a770-41dc-a980-0eb704979bb8","name":"Send Notification","key":"notification","type":"notification","position_x":91,"position_y":1,"options":{"subject":"'{{ read_post.title }}' was {{ action }}d","message":"<{{ $accountability.user }}>","recipient":"{{ subscriber_ids }}","permissions":"$full"},"resolve":null,"reject":null,"flow":"b15c7d8d-c2fa-40e2-903b-4a6ad60a450d"}],"folders":[{"id":"910a8ec9-6d0c-4a9c-bf6e-ee0007d04c8d","name":"User uploads","parent":null},{"id":"ced5749e-9499-4f52-9aed-f776aa5fc852","name":"Admin files","parent":null}],"webhooks":[{"id":1,"name":"hooked","method":"GET","url":"/something","status":"active","data":true,"actions":["create"],"collections":["posts"],"headers":[{"header":"Authorization","value":"Bearer xyz"}]}],"roles":[{"id":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","name":"Editor","icon":"supervised_user_circle","description":null,"ip_access":null,"enforce_tfa":false,"admin_access":false,"app_access":true},{"id":"d4f86fff-edb4-4d71-b93a-b16ecb919841","name":"User","icon":"account_circle","description":"Regular user that can post about their tech stacks, comment on posts, and so on.","ip_access":null,"enforce_tfa":false,"admin_access":false,"app_access":false}],"permissions":[{"id":8,"role":null,"collection":"directus_files","action":"read","permissions":{},"validation":{},"presets":null,"fields":["*"]},{"id":40,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_files","action":"create","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":41,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_files","action":"read","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":42,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_files","action":"update","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":43,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_files","action":"delete","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":44,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_dashboards","action":"create","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":45,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_dashboards","action":"read","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":46,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_dashboards","action":"update","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":47,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_dashboards","action":"delete","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":48,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_panels","action":"create","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":49,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_panels","action":"read","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":50,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_panels","action":"update","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":51,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_panels","action":"delete","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":52,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_folders","action":"create","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":53,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_folders","action":"read","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":54,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_folders","action":"update","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":55,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_folders","action":"delete","permissions":{},"validation":null,"presets":null,"fields":null},{"id":56,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_users","action":"read","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":57,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_users","action":"update","permissions":{"id":{"_eq":"$CURRENT_USER"}},"validation":null,"presets":null,"fields":["first_name","last_name","email","password","location","title","description","avatar","language","theme","tfa_secret"]},{"id":58,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_roles","action":"read","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":59,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_shares","action":"read","permissions":{"_or":[{"role":{"_eq":"$CURRENT_ROLE"}},{"role":{"_null":true}}]},"validation":null,"presets":null,"fields":["*"]},{"id":60,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_shares","action":"create","permissions":{},"validation":null,"presets":null,"fields":["*"]},{"id":61,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_shares","action":"update","permissions":{"user_created":{"_eq":"$CURRENT_USER"}},"validation":null,"presets":null,"fields":["*"]},{"id":62,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_shares","action":"delete","permissions":{"user_created":{"_eq":"$CURRENT_USER"}},"validation":null,"presets":null,"fields":["*"]},{"id":63,"role":"1ea0cde2-d5ba-488a-b9b1-7bc118b7a486","collection":"directus_flows","action":"read","permissions":{"trigger":{"_eq":"manual"}},"validation":null,"presets":null,"fields":["id","name","icon","color","options","trigger"]},{"id":74,"role":"d4f86fff-edb4-4d71-b93a-b16ecb919841","collection":"directus_files","action":"read","permissions":{},"validation":{},"presets":null,"fields":["*"]},{"id":76,"role":"d4f86fff-edb4-4d71-b93a-b16ecb919841","collection":"posts","action":"read","permissions":{"_and":[{"_or":[{"user_updated":{"_eq":"$CURRENT_USER"}},{"status":{"_eq":"published"}}]}]},"validation":null,"presets":null,"fields":["title","id","status","date_created","date_updated","content"]},{"id":77,"role":"d4f86fff-edb4-4d71-b93a-b16ecb919841","collection":"posts","action":"create","permissions":{},"validation":{},"presets":null,"fields":["*"]},{"id":78,"role":"d4f86fff-edb4-4d71-b93a-b16ecb919841","collection":"posts","action":"update","permissions":{"_and":[{"user_created":{"_eq":"$CURRENT_USER"}}]},"validation":null,"presets":null,"fields":["title","status","content"]},{"id":79,"role":"d4f86fff-edb4-4d71-b93a-b16ecb919841","collection":"posts","action":"delete","permissions":{"_and":[{"user_created":{"_eq":"$CURRENT_USER"}}]},"validation":null,"presets":null,"fields":null},{"id":82,"role":"d4f86fff-edb4-4d71-b93a-b16ecb919841","collection":"directus_users","action":"read","permissions":null,"validation":null,"presets":null,"fields":["first_name","last_name","email","avatar","location","description","title","tags","language","status","id","subscriptions"]},{"id":83,"role":null,"collection":"directus_users","action":"create","permissions":null,"validation":null,"presets":{"role":"d4f86fff-edb4-4d71-b93a-b16ecb919841"},"fields":["first_name","last_name","password","email","role"]},{"id":84,"role":null,"collection":"directus_users","action":"read","permissions":{},"validation":{},"presets":null,"fields":["id"]},{"id":85,"role":"d4f86fff-edb4-4d71-b93a-b16ecb919841","collection":"directus_notifications","action":"read","permissions":{"_and":[{"recipient":{"_eq":"$CURRENT_USER"}}]},"validation":null,"presets":null,"fields":["subject","message","collection","recipient","status","timestamp","id","item","sender"]}],"presets":[{"id":6,"bookmark":null,"user":null,"role":"d4f86fff-edb4-4d71-b93a-b16ecb919841","collection":null,"search":null,"layout":"calendar","layout_query":null,"layout_options":null,"refresh_interval":null,"filter":null,"icon":"add_task","color":null},{"id":7,"bookmark":null,"user":null,"role":null,"collection":"directus_files","search":null,"layout":"cards","layout_query":{"cards":{"sort":["-uploaded_on"],"page":1}},"layout_options":{"cards":{"icon":"insert_drive_file","title":"{{ title }}","subtitle":"{{ type }} • {{ filesize }}","size":4,"imageFit":"crop"}},"refresh_interval":null,"filter":null,"icon":"bookmark_outline","color":null}]}